import{b as v,r as m,a as N,j as e,e as P,m as $,L as k,R as f,s as b,d as E}from"./index-B3r4mDoR.js";const z=({openLoginModal:C})=>{const u=v(),[n,g]=m.useState(!1),[r,p]=m.useState({name:"",email:"",password:"",confirmPassword:"",role:"user"}),[t,x]=m.useState({}),{isDarkMode:s}=N(),y=()=>{const a={};r.name.trim()?r.name.length<3&&(a.name="Name must be at least 3 characters long"):a.name="Name is required";const o=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return r.email?o.test(r.email)||(a.email="Please enter a valid email address"):a.email="Email is required",r.password?r.password.length<6&&(a.password="Password must be at least 6 characters long"):a.password="Password is required",r.confirmPassword?r.password!==r.confirmPassword&&(a.confirmPassword="Passwords do not match"):a.confirmPassword="Please confirm your password",x(a),Object.keys(a).length===0},i=a=>{const{name:o,value:d}=a.target;p(l=>({...l,[o]:d})),t[o]&&x(l=>({...l,[o]:""}))},h=async a=>{var o,d,l;if(a.preventDefault(),!y()){b.error("Please fix the errors in the form");return}g(!0);try{(await E.post("/register",{name:r.name,email:r.email,password:r.password,role:r.role})).data&&(b.success("Registration successful! Please login."),u(f.LOGIN,{state:{email:r.email}}))}catch(c){console.error("Registration error:",c);const w=((d=(o=c.response)==null?void 0:o.data)==null?void 0:d.message)||"Registration failed. Please try again.";b.error(w),((l=c.response)==null?void 0:l.status)===409&&x(j=>({...j,email:"Email already exists"}))}finally{g(!1)}};return m.useEffect(()=>{const a=o=>{o.key==="Escape"&&u(-1)};return document.addEventListener("keydown",a),()=>{document.removeEventListener("keydown",a)}},[u]),n?e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 backdrop-blur-sm z-50",children:e.jsx(P,{type:"spinner",text:"Creating your account..."})}):e.jsxs($.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},transition:{duration:.3},className:"fixed inset-0 flex items-center justify-center z-50",children:[e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 backdrop-blur-sm"}),e.jsxs("div",{className:`relative max-w-md w-full mx-4 p-8 ${s?"bg-gray-800":"bg-white"} rounded-2xl shadow-xl z-10`,children:[e.jsx("h2",{className:`text-2xl font-bold mb-6 text-center ${s?"text-white":"text-gray-800"}`,children:"Create an Account"}),e.jsxs("form",{onSubmit:h,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:`block text-sm font-medium ${s?"text-gray-300":"text-gray-700"} mb-1`,children:"Name"}),e.jsx("input",{type:"text",id:"name",name:"name",value:r.name,onChange:i,required:!0,disabled:n,className:`appearance-none rounded-lg relative block w-full px-3 py-2 border ${t.name?"border-red-500":s?"border-gray-600 bg-gray-700 text-white":"border-gray-300 bg-white text-gray-900"} focus:outline-none ${s?"focus:ring-blue-500 focus:border-blue-500":"focus:ring-yellow-500 focus:border-yellow-500"} focus:z-10 sm:text-sm transition-colors duration-200`,placeholder:"Enter your name"}),t.name&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:t.name})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:`block text-sm font-medium ${s?"text-gray-300":"text-gray-700"} mb-1`,children:"Email"}),e.jsx("input",{type:"email",id:"email",name:"email",value:r.email,onChange:i,required:!0,disabled:n,className:`appearance-none rounded-lg relative block w-full px-3 py-2 border ${t.email?"border-red-500":s?"border-gray-600 bg-gray-700 text-white":"border-gray-300 bg-white text-gray-900"} focus:outline-none ${s?"focus:ring-blue-500 focus:border-blue-500":"focus:ring-yellow-500 focus:border-yellow-500"} focus:z-10 sm:text-sm transition-colors duration-200`,placeholder:"Enter your email"}),t.email&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:t.email})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:`block text-sm font-medium ${s?"text-gray-300":"text-gray-700"} mb-1`,children:"Password"}),e.jsx("input",{type:"password",id:"password",name:"password",value:r.password,onChange:i,required:!0,disabled:n,className:`appearance-none rounded-lg relative block w-full px-3 py-2 border ${t.password?"border-red-500":s?"border-gray-600 bg-gray-700 text-white":"border-gray-300 bg-white text-gray-900"} focus:outline-none ${s?"focus:ring-blue-500 focus:border-blue-500":"focus:ring-yellow-500 focus:border-yellow-500"} focus:z-10 sm:text-sm transition-colors duration-200`,placeholder:"Enter your password"}),t.password&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:t.password})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirmPassword",className:`block text-sm font-medium ${s?"text-gray-300":"text-gray-700"} mb-1`,children:"Confirm Password"}),e.jsx("input",{type:"password",id:"confirmPassword",name:"confirmPassword",value:r.confirmPassword,onChange:i,required:!0,disabled:n,className:`appearance-none rounded-lg relative block w-full px-3 py-2 border ${t.confirmPassword?"border-red-500":s?"border-gray-600 bg-gray-700 text-white":"border-gray-300 bg-white text-gray-900"} focus:outline-none ${s?"focus:ring-blue-500 focus:border-blue-500":"focus:ring-yellow-500 focus:border-yellow-500"} focus:z-10 sm:text-sm transition-colors duration-200`,placeholder:"Confirm your password"}),t.confirmPassword&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:t.confirmPassword})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"role",className:`block text-sm font-medium ${s?"text-gray-300":"text-gray-700"} mb-1`,children:"Register as"}),e.jsxs("select",{id:"role",name:"role",value:r.role,onChange:i,required:!0,disabled:n,className:`appearance-none rounded-lg relative block w-full px-3 py-2 border ${s?"border-gray-600 bg-gray-700 text-white":"border-gray-300 bg-white text-gray-900"} focus:outline-none ${s?"focus:ring-blue-500 focus:border-blue-500":"focus:ring-yellow-500 focus:border-yellow-500"} focus:z-10 sm:text-sm transition-colors duration-200`,children:[e.jsx("option",{value:"user",children:"User"}),e.jsx("option",{value:"organizer",children:"Organizer"})]})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:n,className:`w-full flex justify-center py-2 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white ${n?"bg-gray-500 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"} transition-all duration-200`,children:n?"Creating Account...":"Register"})})]}),e.jsxs("div",{className:`text-center text-sm ${s?"text-gray-400":"text-gray-600"} mt-6`,children:["Already have an account?"," ",e.jsx(k,{to:f.LOGIN,className:`font-medium ${s?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-500"} transition-colors duration-200`,children:"Login here"})]})]})]})};export{z as default};
