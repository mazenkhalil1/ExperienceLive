import{r,d as m,j as e,e as N,m as c,A as E,s as u}from"./index-B3r4mDoR.js";const A=()=>{const[o,x]=r.useState([]),[y,g]=r.useState(!0),[p,v]=r.useState(null),[n,f]=r.useState("all");r.useEffect(()=>{w()},[]);const w=async()=>{var t,s;try{const a=await m.get("/events/all");if(a.data.success)x(a.data.data);else throw new Error("Failed to fetch events");g(!1)}catch(a){console.error("Error fetching events:",a),v(((s=(t=a.response)==null?void 0:t.data)==null?void 0:s.message)||"Failed to fetch events"),g(!1)}},i=async(t,s)=>{var a,h;try{if((await m.put(`/events/${t}`,{status:s})).data.success)x(o.map(l=>l._id===t?{...l,status:s}:l)),u.success(`Event ${s} successfully`);else throw new Error("Failed to update event status")}catch(d){console.error("Error updating event status:",d),u.error(((h=(a=d.response)==null?void 0:a.data)==null?void 0:h.message)||"Failed to update event status")}},j=o.filter(t=>n==="all"||t.status===n),b={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.05}}},k={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}};return y?e.jsx("div",{className:"container mx-auto px-4 py-8 min-h-screen-except-nav-footer flex items-center justify-center",children:e.jsx(N,{type:"spinner",size:"large",text:"Loading events..."})}):p?e.jsx("div",{className:"container mx-auto px-4 py-8 text-center text-red-500 dark:text-red-400 py-8",children:p}):e.jsxs(c.div,{initial:{opacity:0},animate:{opacity:1},className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white mb-4 md:mb-0",children:"Manage Events"}),e.jsxs("div",{className:"relative inline-block",children:[e.jsxs("select",{value:n,onChange:t=>f(t.target.value),className:"block appearance-none w-full bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-200 py-2 px-4 pr-8 rounded-md leading-tight focus:outline-none focus:bg-white dark:focus:bg-gray-800 focus:border-blue-500",children:[e.jsx("option",{value:"all",children:"All Events"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"declined",children:"Declined"})]}),e.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700 dark:text-gray-200",children:e.jsx("svg",{className:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})})})]})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Event"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Organizer"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx(E,{children:e.jsx(c.tbody,{initial:"hidden",animate:"visible",variants:b,className:"divide-y divide-gray-200 dark:divide-gray-700",children:j.map(t=>{var s,a;return e.jsxs(c.tr,{variants:k,className:"bg-white dark:bg-gray-800 even:bg-gray-50 dark:even:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-700/50 transition-colors duration-150",children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:t.title}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:t.location})]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm text-gray-900 dark:text-white",children:((s=t.organizer)==null?void 0:s.name)||"Unknown"}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:(a=t.organizer)==null?void 0:a.email})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center text-sm text-gray-500 dark:text-gray-400",children:new Date(t.date).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center align-middle",children:e.jsx("span",{className:`px-2 py-0.5 inline-flex text-xs leading-5 font-semibold rounded-full uppercase shadow-sm
                      ${t.status==="approved"?"bg-green-500 text-white dark:bg-green-600":""}
                      ${t.status==="pending"?"bg-yellow-400 text-gray-800 dark:bg-yellow-500":""}
                      ${t.status==="declined"?"bg-red-500 text-white dark:bg-red-600":""}
                    `,children:t.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center text-sm font-medium",children:e.jsxs("div",{className:"flex justify-center space-x-4",children:[t.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>i(t._id,"approved"),className:"text-green-600 dark:text-green-400 hover:underline",children:"Approve"}),e.jsx("button",{onClick:()=>i(t._id,"declined"),className:"text-red-600 dark:text-red-400 hover:underline",children:"Decline"})]}),t.status!=="pending"&&e.jsx("button",{onClick:()=>i(t._id,"pending"),className:"text-blue-600 dark:text-blue-400 hover:underline",children:"Reset to Pending"})]})})]},t._id)})},"event-table-body")})]})})]})};export{A as default};
