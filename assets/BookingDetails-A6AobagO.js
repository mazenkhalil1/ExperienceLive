import{f as y,b,r as o,j as e,e as j,d as c,s as d}from"./index-DMHo1UD5.js";const N=()=>{const{id:n}=y(),x=b(),[s,g]=o.useState(null),[m,h]=o.useState(!0),[l,u]=o.useState(null);o.useEffect(()=>{(async()=>{var t,a;try{const r=await c.get(`/bookings/${n}`);g(r.data.data)}catch(r){console.error("Error fetching booking details:",r),u(((a=(t=r.response)==null?void 0:t.data)==null?void 0:a.message)||"Failed to fetch booking details")}finally{h(!1)}})()},[n]);const p=async()=>{var i,t;try{await c.delete(`/bookings/${n}`),d.success("Booking cancelled successfully"),x("/bookings")}catch(a){console.error("Error cancelling booking:",a),d.error(((t=(i=a.response)==null?void 0:i.data)==null?void 0:t.message)||"Failed to cancel booking")}};return m?e.jsx(j,{}):l?e.jsx("div",{className:"p-4 bg-red-50 text-red-700 rounded-md",children:l}):s?e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx("div",{className:"max-w-2xl mx-auto bg-white shadow-lg rounded-lg overflow-hidden",children:e.jsxs("div",{className:"px-6 py-4",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Booking Details"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:s.event.title}),e.jsxs("p",{className:"text-gray-600",children:["Date: ",new Date(s.event.date).toLocaleDateString()]})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Booking Information"}),e.jsxs("p",{className:"text-gray-600",children:["Booking ID: ",s._id]}),e.jsxs("p",{className:"text-gray-600",children:["Status: ",s.status]}),e.jsxs("p",{className:"text-gray-600",children:["Quantity: ",s.quantity," tickets"]}),e.jsxs("p",{className:"text-gray-600",children:["Total Price: $",(s.quantity*s.event.price).toFixed(2)]}),e.jsxs("p",{className:"text-gray-600",children:["Booked on: ",new Date(s.createdAt).toLocaleString()]})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Event Details"}),e.jsxs("p",{className:"text-gray-600",children:["Venue: ",s.event.venue]}),e.jsxs("p",{className:"text-gray-600",children:["Time: ",new Date(s.event.date).toLocaleTimeString()]}),e.jsxs("p",{className:"text-gray-600",children:["Price per ticket: $",s.event.price]})]}),s.status==="Confirmed"&&e.jsx("div",{className:"border-t border-gray-200 pt-4",children:e.jsx("button",{onClick:p,className:"w-full px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors",children:"Cancel Booking"})})]})]})})}):e.jsx("div",{className:"text-center py-8",children:e.jsx("h2",{className:"text-xl font-semibold text-gray-600",children:"Booking not found"})})};export{N as default};
