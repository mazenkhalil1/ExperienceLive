import{u as k,r as y,j as e,e as N,s as x,d as P,a as L,m as v}from"./index-B3r4mDoR.js";const C=({onUpdateSuccess:r})=>{const{user:l,login:p}=k(),[h,c]=y.useState(!1),[a,b]=y.useState({name:(l==null?void 0:l.name)||"",email:(l==null?void 0:l.email)||"",profilePicture:(l==null?void 0:l.profilePicture)||""}),[i,d]=y.useState({}),m=()=>{const s={};a.name.trim()?a.name.length<3&&(s.name="Name must be at least 3 characters long"):s.name="Name is required";const o=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return a.email?o.test(a.email)||(s.email="Please enter a valid email address"):s.email="Email is required",a.profilePicture&&!j(a.profilePicture)&&(s.profilePicture="Please enter a valid URL"),d(s),Object.keys(s).length===0},j=s=>{try{return new URL(s),!0}catch{return!1}},u=s=>{const{name:o,value:g}=s.target;b(n=>({...n,[o]:g})),i[o]&&d(n=>({...n,[o]:""}))},f=async s=>{var o,g;if(s.preventDefault(),!m()){x.error("Please fix the errors in the form");return}c(!0);try{const n=await P.put("/users/profile",a);n.data&&(x.success("Profile updated successfully!"),p(n.data.data),r&&r())}catch(n){const w=((g=(o=n.response)==null?void 0:o.data)==null?void 0:g.message)||"Failed to update profile";x.error(w)}finally{c(!1)}},t={form:{display:"flex",flexDirection:"column",gap:"1rem",maxWidth:"400px",margin:"0 auto"},formGroup:{display:"flex",flexDirection:"column",gap:"0.5rem"},label:{fontSize:"0.9rem",color:"#666",fontWeight:"500"},input:{padding:"0.75rem",borderRadius:"4px",border:"1px solid #ddd",fontSize:"1rem",transition:"border-color 0.2s"},error:{color:"#dc3545",fontSize:"0.8rem",marginTop:"0.25rem"},button:{padding:"0.75rem",backgroundColor:"#007bff",color:"#fff",border:"none",borderRadius:"4px",fontSize:"1rem",cursor:"pointer",transition:"background-color 0.2s","&:hover":{backgroundColor:"#0056b3"},"&:disabled":{backgroundColor:"#ccc",cursor:"not-allowed"}}};return h?e.jsx(N,{type:"spinner",text:"Updating profile..."}):e.jsxs("form",{onSubmit:f,style:t.form,children:[e.jsxs("div",{style:t.formGroup,children:[e.jsx("label",{htmlFor:"name",style:t.label,children:"Name"}),e.jsx("input",{type:"text",id:"name",name:"name",value:a.name,onChange:u,style:{...t.input,borderColor:i.name?"#dc3545":"#ddd"},placeholder:"Enter your name"}),i.name&&e.jsx("span",{style:t.error,children:i.name})]}),e.jsxs("div",{style:t.formGroup,children:[e.jsx("label",{htmlFor:"email",style:t.label,children:"Email"}),e.jsx("input",{type:"email",id:"email",name:"email",value:a.email,onChange:u,style:{...t.input,borderColor:i.email?"#dc3545":"#ddd"},placeholder:"Enter your email"}),i.email&&e.jsx("span",{style:t.error,children:i.email})]}),e.jsxs("div",{style:t.formGroup,children:[e.jsx("label",{htmlFor:"profilePicture",style:t.label,children:"Profile Picture URL (Optional)"}),e.jsx("input",{type:"url",id:"profilePicture",name:"profilePicture",value:a.profilePicture,onChange:u,style:{...t.input,borderColor:i.profilePicture?"#dc3545":"#ddd"},placeholder:"Enter profile picture URL"}),i.profilePicture&&e.jsx("span",{style:t.error,children:i.profilePicture})]}),e.jsx("button",{type:"submit",style:t.button,disabled:h,children:h?"Updating...":"Update Profile"})]})},M=()=>{const{user:r,loading:l,error:p}=k(),{isDarkMode:h}=L(),[c,a]=y.useState(!1);r!=null&&r.birthdate&&new Date(r.birthdate).toLocaleDateString();const b=d=>{if(!d)return"N/A";try{const m=new Date(d),u=Math.abs(new Date-m),f=Math.floor(u/(1e3*60*60*24));return f===0?"Today":f===1?"1 day":`${f} days`}catch(m){return console.error("Error calculating membership duration:",m),"N/A"}};if(l)return e.jsx("div",{className:"flex justify-center items-center min-h-screen-except-nav-footer pt-16 px-4",children:e.jsx(N,{type:"spinner",size:"large",text:"Loading profile..."})});if(p)return x.error(p),e.jsx("div",{className:"flex justify-center items-center min-h-screen-except-nav-footer pt-16 px-4",children:e.jsx("div",{className:"text-red-500 dark:text-red-400 text-center",children:"Error loading profile. Please try again later."})});if(!r)return e.jsx("div",{className:"flex justify-center items-center min-h-screen-except-nav-footer pt-16 px-4",children:e.jsx("div",{className:"text-center text-gray-600 dark:text-gray-400",children:"No profile data available"})});const i=()=>{a(!1),x.success("Profile updated successfully!")};return e.jsx(v.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"flex justify-center py-8 px-4",children:e.jsxs("div",{className:"max-w-4xl w-full bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 md:p-8 space-y-8",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-center sm:items-start space-y-6 sm:space-y-0 sm:space-x-8",children:[e.jsx("div",{className:"w-28 h-28 sm:w-32 sm:h-32 rounded-full bg-gray-200 dark:bg-gray-700 flex items-center justify-center overflow-hidden flex-shrink-0",children:r.profilePicture?e.jsx("img",{src:r.profilePicture,alt:`${r.name}'s profile`,className:"w-full h-full object-cover"}):e.jsx("svg",{className:"w-20 h-20 text-gray-400 dark:text-gray-500",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})})}),e.jsxs("div",{className:"flex-1 flex flex-col items-center sm:items-start text-center sm:text-left",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gray-800 dark:text-white mb-1 font-serif",children:r.name}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400 text-base md:text-lg",children:["Member Since ",b(r.createdAt)]}),e.jsx("button",{onClick:()=>a(!c),className:"mt-4 px-6 py-2 bg-blue-600 dark:bg-blue-500 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700 dark:hover:bg-blue-600 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-offset-gray-800",children:c?"Cancel Edit":"Edit Profile"})]})]}),c?e.jsx(C,{onUpdateSuccess:i}):e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2,duration:.5},className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"flex items-center text-gray-700 dark:text-gray-300",children:[e.jsx("svg",{className:"w-5 h-5 mr-3 text-blue-500 dark:text-blue-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M18.364 5.636l-3.536 3.536m0 0a5 5 0 11-7.072 0m7.072 0L5.636 18.364m0 0a5 5 0 110-7.072m0 7.072L18.364 5.636m0 0a5 5 0 107.072 7.072M18.364 5.636A5 5 0 1011.292 12.708M12.708 11.292a5 5 0 10-7.072 7.072M18.364 5.636L5.636 18.364"})}),e.jsx("span",{className:"capitalize",children:r.role||"N/A"})]}),r.location&&e.jsxs("div",{className:"flex items-center text-gray-700 dark:text-gray-300",children:[e.jsxs("svg",{className:"w-5 h-5 mr-3 text-blue-500 dark:text-blue-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),e.jsx("span",{children:r.location||"N/A"})]}),e.jsxs("div",{className:"flex items-center text-gray-700 dark:text-gray-300",children:[e.jsx("svg",{className:"w-5 h-5 mr-3 text-blue-500 dark:text-blue-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8m-1 9l-4.343-4.343m0 0L9.657 17.657m0 0l-4.343 4.343m0 0A9 9 0 1020 11a9 9 0 00-11.468 5.16m0 0L7 19m4 4v-4m-3 0H9m10 0h2"})}),e.jsx("span",{children:r.email||"N/A"})]})]})})]})})};export{M as default};
