import{r as o,g as C,a as L,d as S,j as e,m as i,L as R}from"./index-B3r4mDoR.js";import{E as B}from"./EventCard-DxsXtql2.js";const M=()=>{const[u,g]=o.useState([]),[p,f]=o.useState(!0),[l,c]=o.useState(null),{searchTerm:d,filters:r,resetFilters:D}=C(),{isDarkMode:y}=L(),n=o.useRef(null),m=o.useCallback(async()=>{var t,s;try{const a=await S.get("/events");if(!a.data)throw new Error("No data received from server");g(a.data.data||[]),c(null)}catch(a){console.error("Error fetching events:",a),c(((s=(t=a.response)==null?void 0:t.data)==null?void 0:s.message)||"Failed to fetch events")}finally{f(!1)}},[]);o.useEffect(()=>{m()},[m]);const b=u.filter(t=>{const s=t.title.toLowerCase().includes(d.toLowerCase())||t.location.toLowerCase().includes(d.toLowerCase()),a=!r.date||new Date(t.date).toLocaleDateString()===r.date,k=!r.location||t.location===r.location,N=r.category==="all"||t.category===r.category;let h=!0;if(r.priceRange!=="all"){const[E,x]=r.priceRange.split("-").map(Number);h=t.price>=E&&(x?t.price<=x:!0)}return s&&a&&k&&h&&N}),j=()=>{n.current&&n.current.scrollBy({left:-400,behavior:"smooth"})},v=()=>{n.current&&n.current.scrollBy({left:400,behavior:"smooth"})},w=[{name:"Comedy",emoji:"🎭",count:5},{name:"Concerts",emoji:"🎵",count:8},{name:"Sports",emoji:"⚽",count:3},{name:"Theater",emoji:"🎭",count:4},{name:"Food",emoji:"🍽️",count:6}];return p?e.jsx("div",{className:"flex justify-center items-center min-h-screen",children:e.jsx(i.div,{className:"w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}})}):l?e.jsx(i.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"container mx-auto px-4 py-8",children:e.jsx("div",{className:"bg-red-100 dark:bg-red-900/30 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-400 px-4 py-3 rounded-lg shadow-lg",children:l})}):e.jsxs(i.div,{initial:{opacity:0},animate:{opacity:1},className:"container mx-auto px-4 py-8",children:[e.jsxs("section",{className:"mb-12",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-800 dark:text-white mb-6",children:"Upcoming Events"}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:j,className:"absolute left-0 top-1/2 -translate-y-1/2 z-10 bg-white dark:bg-gray-800 rounded-full p-2 shadow-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200",children:e.jsx("svg",{className:"w-6 h-6 text-gray-600 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 19l-7-7 7-7"})})}),e.jsx("div",{ref:n,className:"flex overflow-x-auto gap-6 pb-4 scrollbar-hide snap-x snap-mandatory",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:b.map(t=>e.jsx("div",{className:"flex-none w-[300px] snap-center",children:e.jsx(B,{event:t})},t._id))}),e.jsx("button",{onClick:v,className:"absolute right-0 top-1/2 -translate-y-1/2 z-10 bg-white dark:bg-gray-800 rounded-full p-2 shadow-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200",children:e.jsx("svg",{className:"w-6 h-6 text-gray-600 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"})})})]}),e.jsx("div",{className:"flex justify-center mt-8",children:e.jsx(R,{to:"/all-events",className:"px-6 py-2 rounded-full border-2 border-blue-500 text-blue-500 hover:bg-blue-500 hover:text-white transition-colors duration-200 font-medium",children:"Show All Events"})})]}),e.jsxs("section",{className:"mt-12",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-6",children:"Explore Top Categories"}),e.jsx("div",{className:"flex flex-wrap gap-4 justify-center",children:w.map((t,s)=>e.jsxs(i.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:s*.1},className:`flex flex-col items-center p-4 rounded-full bg-white dark:bg-gray-800 shadow-md hover:shadow-lg transition-shadow duration-200 cursor-pointer ${y?"hover:bg-gray-700":"hover:bg-gray-50"}`,children:[e.jsx("span",{className:"text-2xl mb-2",children:t.emoji}),e.jsx("span",{className:"font-medium text-gray-800 dark:text-white",children:t.name}),e.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[t.count," Events"]})]},t.name))})]})]})};export{M as default};
