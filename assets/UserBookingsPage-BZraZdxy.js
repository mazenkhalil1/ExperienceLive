import{r as i,j as e,e as j,m as o,A as k,d as m,s as h}from"./index-DMHo1UD5.js";const f=()=>{const[l,d]=i.useState([]),[u,y]=i.useState(!0),[x,g]=i.useState(null),c=async()=>{var t,a;try{const s=await m.get("/users/bookings");d(s.data||[])}catch(s){console.error("Error fetching bookings:",s),g(((a=(t=s.response)==null?void 0:t.data)==null?void 0:a.message)||"Failed to fetch bookings")}finally{y(!1)}};i.useEffect(()=>{c()},[]);const p=async t=>{var a,s;if(window.confirm("Are you sure you want to cancel this booking?"))try{d(r=>r.map(n=>n._id===t?{...n,status:"cancelling"}:n)),await m.delete(`/bookings/${t}`),h.success("Booking cancelled successfully"),c()}catch(r){console.error("Error cancelling booking:",r),h.error(((s=(a=r.response)==null?void 0:a.data)==null?void 0:s.message)||"Failed to cancel booking"),c()}};return u?e.jsx("div",{className:"container mx-auto px-4 py-8 min-h-screen-except-nav-footer flex items-center justify-center",children:e.jsx(j,{type:"spinner",size:"large",text:"Loading bookings..."})}):x?e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx("div",{className:"p-4 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400 rounded-lg shadow-md",children:x})}):l.length===0?e.jsxs(o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"container mx-auto px-4 py-8 text-center min-h-screen-except-nav-footer",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-4",children:"My Bookings"}),e.jsx("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-lg shadow-md text-gray-600 dark:text-gray-400",children:"You haven't made any bookings yet."})]}):e.jsxs(o.div,{initial:{opacity:0},animate:{opacity:1},className:"container mx-auto px-4 py-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white mb-6",children:"My Bookings"}),e.jsx("div",{className:"space-y-6",children:e.jsx(k,{children:l.map(t=>{var a,s,r,n;return e.jsxs(o.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"bg-white dark:bg-gray-800 shadow-md rounded-lg p-6 border border-gray-200 dark:border-gray-700 flex flex-col md:flex-row justify-between items-start md:items-center space-y-4 md:space-y-0",children:[e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:((a=t.event)==null?void 0:a.title)||"Event Title Not Available"}),((s=t.event)==null?void 0:s.date)&&e.jsxs("div",{className:"flex items-center text-gray-600 dark:text-gray-300",children:[e.jsx("svg",{className:"w-5 h-5 mr-2 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),e.jsxs("span",{children:["Date: ",new Date(t.event.date).toLocaleDateString()]})]}),((r=t.event)==null?void 0:r.location)&&e.jsxs("div",{className:"flex items-center text-gray-600 dark:text-gray-300",children:[e.jsxs("svg",{className:"w-5 h-5 mr-2 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),e.jsxs("span",{children:["Location: ",t.event.location]})]}),e.jsxs("div",{className:"flex items-center text-gray-600 dark:text-gray-300",children:[e.jsx("svg",{className:"w-5 h-5 mr-2 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsxs("span",{children:["Quantity: ",t.quantity," tickets"]})]}),e.jsxs("div",{className:"flex items-center text-gray-600 dark:text-gray-300",children:[e.jsx("svg",{className:"w-5 h-5 mr-2 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("span",{children:["Total Price: ",e.jsxs("span",{className:"font-semibold",children:["$",((n=t.totalPrice)==null?void 0:n.toFixed(2))||"N/A"]})]})]}),e.jsxs("div",{className:"flex items-center text-gray-600 dark:text-gray-300",children:[e.jsx("svg",{className:"w-5 h-5 mr-2 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Status: ",e.jsx("span",{className:`font-medium ${t.status==="active"?"text-green-600 dark:text-green-400":t.status==="cancelled"?"text-red-600 dark:text-red-400":"text-gray-600 dark:text-gray-400"}`,children:t.status})]})]}),e.jsx("div",{className:"flex flex-col items-center space-y-2",children:t.status==="active"&&e.jsx(o.button,{onClick:()=>p(t._id),className:"px-4 py-2 bg-red-600 dark:bg-red-500 text-white rounded-lg hover:bg-red-700 dark:hover:bg-red-600 transition-colors duration-200 shadow-md",whileHover:{scale:1.02},whileTap:{scale:.98},disabled:t.status==="cancelling",children:t.status==="cancelling"?e.jsxs("div",{className:"flex items-center",children:[e.jsxs("svg",{className:"animate-spin h-5 w-5 mr-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l2-2.647z"})]}),"Cancelling..."]}):"Cancel Booking"})})]},t._id)})})})]})};export{f as default};
